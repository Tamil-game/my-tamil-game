import streamlit as st
import random
import time
# рокроХрпНроХродрпНродро┐ройрпН роЕроорпИрокрпНрокрпБ
st.set_page_config(page_title="роорпЖроХро╛ роХро▓рпНро╡ро┐ ро╡ро┐ро│рпИропро╛роЯрпНроЯрпБ", page_icon="ЁЯОо", layout="wide")

# рокро┐ройрпНройрогро┐ рооро▒рпНро▒рпБроорпН роОро┤рпБродрпНродрпБ ро╡роЯро┐ро╡роорпН (CSS)
st.markdown("""
    <style>
    .stApp {
        background: linear-gradient(to right, #1e3c72, #2a5298);
        color: white;
    }
    .game-card {
        background-color: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 15px;
        border: 2px solid #ffffff;
        margin-bottom: 25px;
    }
    h1, h2, h3, p {
        color: white !important;
    }
    </style>
    """, unsafe_allow_html=True)

st.title("ЁЯОУ 6 роХрпЗро│рпНро╡ро┐роХро│рпН - 2 ро╡рпЖро╡рпНро╡рпЗро▒рпБ ро╡ро┐ро│рпИропро╛роЯрпНроЯрпБроХро│рпН!")

# --- ро╡ро┐ро│рпИропро╛роЯрпНроЯрпБ 1: ро░рпЗроЯро┐ропрпЛ ро╕рпНроЯрпИро▓рпН ---
st.header("ЁЯХ╣я╕П ро╡ро┐ро│рпИропро╛роЯрпНроЯрпБ 1: роХрогро┐родроорпН & рокрпКродрпБ роЕро▒ро┐ро╡рпБ")
st.markdown("<div class='game-card'>", unsafe_allow_html=True)

c1, c2, c3 = st.columns(3)
with c1:
    ans1 = st.radio("1. 15 + 25 роОро╡рпНро╡ро│ро╡рпБ?", ["--", "30", "40", "50", "35"], key="g1")
with c2:
    ans2 = st.radio("2. роХрогро┐ройро┐ропро┐ройрпН 'роорпВро│рпИ' роОродрпБ?", ["--", "Keyboard", "CPU", "Monitor", "Mouse"], key="g2")
with c3:
    ans3 = st.radio("3. ро╡ро╛ро░родрпНродро┐ройрпН роорпБродро▓рпН роиро╛ро│рпН роОродрпБ?", ["--", "родро┐роЩрпНроХро│рпН", "роЮро╛ропро┐ро▒рпБ", "рокрпБродройрпН", "роЪройро┐"], key="g3")

if st.button("ро╡ро┐ро│рпИропро╛роЯрпНроЯрпБ 1 роЪро░ро┐рокро╛ро░рпН"):
    s1 = 0
    if ans1 == "40": s1 += 1
    if ans2 == "CPU": s1 += 1
    if ans3 == "роЮро╛ропро┐ро▒рпБ": s1 += 1
    st.success(f"ро╡ро┐ро│рпИропро╛роЯрпНроЯрпБ 1 роородро┐рокрпНрокрпЖрогрпН: {s1}/3")
    if s1 == 3: st.balloons()
st.markdown("</div>", unsafe_allow_html=True)

# --- ро╡ро┐ро│рпИропро╛роЯрпНроЯрпБ 2: роЪрпЖро▓роХрпНроЯрпН рокро╛роХрпНро╕рпН ро╕рпНроЯрпИро▓рпН ---
st.header("ЁЯЪА ро╡ро┐ро│рпИропро╛роЯрпНроЯрпБ 2: роЕро▒ро┐ро╡ро┐ропро▓рпН & роЗропро▒рпНроХрпИ")
st.markdown("<div class='game-card'>", unsafe_allow_html=True)

q4 = st.selectbox("4. роЗро▓роЩрпНроХрпИропро┐ройрпН родрпЗроЪро┐роп рооро▓ро░рпН роОродрпБ?", ["--родрпЗро░рпНро╡рпБ роЪрпЖропрпНроХ--", "родро╛рооро░рпИ", "роирпАро▓ рооро╛рогро┐роХрпНроХроорпН", "роирпАро▓рпЛро▒рпНрокро▓роорпН", "рооро▓рпНро▓ро┐роХрпИ"])
q5 = st.selectbox("5. рооройро┐род роЙроЯро▓ро┐ро▓рпН роЙро│рпНро│ роОро▓рпБроорпНрокрпБроХро│рпН роОродрпНродройрпИ?", ["--родрпЗро░рпНро╡рпБ роЪрпЖропрпНроХ--", "200", "206", "210", "195"])
q6 = st.selectbox("6. роТро│ро┐роЪрпНроЪрпЗро░рпНроХрпНроХрпИроХрпНроХрпБродрпН родрпЗро╡рпИропро╛рой роорпБроХрпНроХро┐роп ро╡ро╛ропрпБ?", ["--родрпЗро░рпНро╡рпБ роЪрпЖропрпНроХ--", "роЖроХрпНро╕ро┐роЬройрпН", "роирпИроЯрпНро░роЬройрпН", "роХро╛ро░рпНрокройрпН роЯрпИ роЖроХрпНроЪрпИроЯрпБ", "ро╣рпИроЯрпНро░роЬройрпН"])

# роорпБройрпНройрпЗро▒рпНро▒рокрпН рокроЯрпНроЯрпИ
prog = 0
if q4 != "--родрпЗро░рпНро╡рпБ роЪрпЖропрпНроХ--": prog += 33
if q5 != "--родрпЗро░рпНро╡рпБ роЪрпЖропрпНроХ--": prog += 33
if q6 != "--родрпЗро░рпНро╡рпБ роЪрпЖропрпНроХ--": prog += 34
st.progress(prog)

if st.button("ро╡ро┐ро│рпИропро╛роЯрпНроЯрпБ 2 роЪро░ро┐рокро╛ро░рпН"):
    s2 = 0
    if q4 == "роирпАро▓рпЛро▒рпНрокро▓роорпН": s2 += 1
    if q5 == "206": s2 += 1
    if q6 == "роХро╛ро░рпНрокройрпН роЯрпИ роЖроХрпНроЪрпИроЯрпБ": s2 += 1
    if s2 == 3:
        st.snow()
        st.success("роЕро▒рпНрокрпБродроорпН! роорпБро┤рпБ роородро┐рокрпНрокрпЖрогрпНроХро│рпН!")
    else:
        st.warning(f"ро╡ро┐ро│рпИропро╛роЯрпНроЯрпБ 2 роородро┐рокрпНрокрпЖрогрпН: {s2}/3")

st.markdown("</div>", unsafe_allow_html=True)
# --- ро╡ро┐ро│рпИропро╛роЯрпНроЯрпБ 3: роЪрпБро┤ро▒рпНроЪроХрпНроХро░ роХрогро┐родроорпН ---
st.header("ЁЯОб ро╡ро┐ро│рпИропро╛роЯрпНроЯрпБ 3: роХрпВроЯрпНроЯро▓рпН роЪрпБро┤ро▒рпНроЪроХрпНроХро░роорпН")
st.markdown("<div class='game-card'>", unsafe_allow_html=True)

# ро╡ро┐ройро╛роХрпНроХро│рпН рооро▒рпНро▒рпБроорпН ро╡ро┐роЯрпИроХро│рпН (Dictionary ро╡роЯро┐ро╡ро┐ро▓рпН)
questions = ["5 + 3", "10 + 2", "15 + 5", "7 + 4", "12 + 6", "9 + 9", "20 + 10", "8 + 6"]
answers = {"5 + 3": "8", "10 + 2": "12", "15 + 5": "20", "7 + 4": "11", "12 + 6": "18", "9 + 9": "18", "20 + 10": "30", "8 + 6": "14"}

col_spin, col_ans = st.columns([1, 1])

st.title("ЁЯОб ро╡ро┐ройро╛роХрпНроХро│рпН роЕроЯроЩрпНроХро┐роп роЪрпБро┤ро▒рпНроЪроХрпНроХро░роорпН")

# 1. роХрпЗро│рпНро╡ро┐роХро│ро┐ройрпН рокроЯрпНроЯро┐ропро▓рпН
options = ["5+3", "10+2", "15+5", "7+4", "12+6", "9+9"]

if st.button("ЁЯОб роЪроХрпНроХро░родрпНродрпИроЪрпН роЪрпБро┤ро▒рпНро▒рпБ!"):
    placeholder = st.empty()
    
    # 2. роЪроХрпНроХро░роорпН роЪрпБро┤ро▓рпБроорпН роорпЗроЬро┐роХрпН (10 роорпБро▒рпИ ро╡ро┐ройро╛роХрпНроХро│рпН рооро╛ро▒рпБроорпН)
    for i in range(10):
        pick = random.choice(options)
        placeholder.markdown(f"""
            <div style="display: flex; justify-content: center; align-items: center; 
                        background-color: #FF4B4B; color: white; border-radius: 50%; 
                        width: 200px; height: 200px; border: 10px solid #FFD700;
                        font-size: 30px; font-weight: bold;">
                {pick}
            </div>
        """, unsafe_allow_html=True)
        time.sleep(0.1)
    
    # 3. роХроЯрпИроЪро┐ропро╛роХ роТро░рпБ роХрпЗро│рпНро╡ро┐ропро┐ро▓рпН роЪроХрпНроХро░роорпН роиро┐ро▒рпНроХрпБроорпН
    final_q = random.choice(options)
    placeholder.markdown(f"""
        <div style="display: flex; justify-content: center; align-items: center; 
                    background-color: #2E7D32; color: white; border-radius: 50%; 
                    width: 200px; height: 200px; border: 10px solid #FFD700;
                    font-size: 35px; font-weight: bold; box-shadow: 0px 0px 20px gold;">
            {final_q}
        </div>
    """, unsafe_allow_html=True)
    st.session_state['current_q'] = final_q

# 4. рокродро┐ро▓рпН роЪрпКро▓рпНро▓рпБроорпН рокрпЖроЯрпНроЯро┐
if 'current_q' in st.session_state:
    st.write(f"### роХрпЗро│рпНро╡ро┐: {st.session_state['current_q']}")
    user_ans = st.text_input("роЙроЩрпНроХро│рпН ро╡ро┐роЯрпИ:")
    if st.button("роЪро░ро┐рокро╛ро░рпН"):
        correct_ans = answers[st.session_state['current_q']]
        if user_ans == correct_ans:
            st.balloons()
            st.success("роЕро▒рпНрокрпБродроорпН! роЪро░ро┐ропро╛рой ро╡ро┐роЯрпИ!")
        else:
            st.error(f"родро╡ро▒рпБ! ро╡ро┐роЯрпИ: {correct_ans}")
